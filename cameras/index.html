<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Cache-Control" content="no-cache">

    <meta property="og:title" content="Purdue Camera Streams" />
    <meta property="og:site_name" content="David Tschida" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Compilation of publically available camera streams on Purdue University campus." />
    <meta property="og:url" content="http://davidtschida.com/cameras" />
    <meta property="og:image" content="http://lwsnb148-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi" />

    <title>Purdue Cameras</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>

	 <script>
	   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	   ga('create', 'UA-50369942-1', 'davidtschida.com');
	   ga('send', 'pageview', "/cameras");
	 </script>

   <style>
   .stream-title {
     color: #fff;
   }
   </style>
  </head>
  <body style='background-color:black'>

    <div class="container">
      <div class="row" style='vertical-align:middle'>
          <h1 class="text-center" style='color:#CC0000;'><b>Purdue Camera Streams</b></h1>
          <p style='color:#CC0000;'>Note: These are publically available cameras with notices posted in the relevant rooms. This site simply provides a way to view them all at once.</p>
      </div>

      <script>
      function refresh(element) {
        if(pageIsVisible) {
          var d = new Date();
          var img = new Image();
          img.addEventListener('load', this, false);

          // console.log("Refreshing: " + $(element).attr("src"))
          img.src = $(element).attr("src").split("?")[0]+"?"+d.getTime();

          $(element).attr("src", img.src);
        }
      }

      var startVisibleTime = new Date();

      var pageIsVisible = true;

      var hidden, visibilityChange;
      if (typeof document.hidden !== "undefined") { // Opera 12.10 and Firefox 18 and later support
        hidden = "hidden";
        visibilityChange = "visibilitychange";
      } else if (typeof document.mozHidden !== "undefined") {
        hidden = "mozHidden";
        visibilityChange = "mozvisibilitychange";
      } else if (typeof document.msHidden !== "undefined") {
        hidden = "msHidden";
        visibilityChange = "msvisibilitychange";
      } else if (typeof document.webkitHidden !== "undefined") {
        hidden = "webkitHidden";
        visibilityChange = "webkitvisibilitychange";
      }

      // If the page is hidden, pause the video;
      // if the page is shown, play the video
      function handleVisibilityChange() {
        if (document[hidden]) {
          pageIsVisible = false;

          //Send the time spent looking at the page to GA.
          var startms = startVisibleTime.getTime();
          var endms = new Date().getTime();
          ga('send', 'timing', "cameras", "pageVisibleTime", endms - startms);

        } else {
          console.log("PAGE IS BACK!");
          pageIsVisible = true;

          startVisibleTime = new Date();

          var elements = document.getElementsByClassName("stream");
          for(var i=0; i<elements.length; i++) {
              refresh(elements[i]);
          }
        }
      }

      // Warn if the browser doesn't support addEventListener or the Page Visibility API
      if (typeof document.addEventListener === "undefined" ||
        typeof document[hidden] === "undefined") {
        ga('send', 'event', 'error', 'cameras', 'old_browser');
        alert("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API. If you are seeing this alert, please use the old version. http://davidtschida.com/cameras/old.html");
      } else {
        // Handle page visibility change
        document.addEventListener(visibilityChange, handleVisibilityChange, false);
      }
      </script>
      <hr>
        <ul class="large-block-grid-4 medium-block-grid-2 small-block-grid-1" style='padding-left:15px; padding-right:15px;'>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsnb148-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN B148</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsnb146-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN B146</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsnb131-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN B131</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsnb158-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN B158</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsnb160-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN B160</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://haas257-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">HAAS 257</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://haasg056-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">HAAS G056</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://haasg040-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">HAAS G040</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsn1130n-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN COMMONS N(A)</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsn1130s-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN COMMONS S</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://128.210.129.12/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">UNION</p>
          </li>
          <li>
            <img class="stream" onload="refresh(this)" src="http://lwsn2h01-cam.cs.purdue.edu/axis-cgi/jpg/image.cgi">
            <p class="stream-title text-center">LWSN COMMONS N(B)</p>
          </li>
        </ul>
      <hr>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- Cameras Page -->
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-6452187524748932"
           data-ad-slot="2484458204"
           data-ad-format="auto"></ins>
      <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

      <div class="row">
          <p class="text-center" style='color:#fff;'>I recently updated the page to make all the streams load, but framerate suffers a bit</p>
          <p class="text-center" style='color:#fff;'>To access the old version of this page click <a href="/cameras/old.html" onclick="ga('send', 'event', 'click', 'cameras', 'link_to_old');">here</a></p>
      </div>
    </div>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>
